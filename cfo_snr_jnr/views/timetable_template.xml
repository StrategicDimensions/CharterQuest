<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>

    <template id="external_layout_background_custom">
        <div class="header o_background_header">
            <div class="pull-right">
                <h3 class="mt0 text-right" t-field="company.report_header"/>
            </div>
            <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % to_text(company.logo)" class="pull-left"/>
            <div>
                <div class="pull-right">
                    <b><strong>TP - Tuition Phase</strong></b><br/>
                    <b><strong>EXPP - Exam Preparation Phase</strong></b>
                </div>
            </div>
            <div class="clearfix mb8"/>
        </div>

        <div class="article o_report_layout_background">
            <t t-raw="0" />
        </div>
        <div class="footer o_background_footer">
            <div class="text-center">
                <strong>Disclaimer:</strong><span t-esc="company.disclaimer_text"></span>
                <ul class="list-inline">
                    <li t-if="company.phone"><i class="fa fa-phone"/> <span t-field="company.phone"/></li>
                    <li t-if="company.email"><i class="fa fa-at"/> <span t-field="company.email"/></li>
                    <li t-if="company.website"><i class="fa fa-globe"/> <span t-field="company.website"/></li>
                    <li t-if="company.vat"><i class="fa fa-building-o"/><t t-esc="company.country_id.vat_label or 'TIN'"/>: <span t-field="company.vat"/></li>
                </ul>
                <div t-field="company.report_footer"/>
                <div class="text-muted">
                    Page:
                    <span class="page"/>
                    of
                    <span class="topage"/>
                </div>
            </div>
        </div>
    </template>


    <template id="external_layout_custom">
        <!-- Multicompany -->
        <t t-if="not o and doc">
            <t t-set="o" t-value="doc"/>
        </t>

        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id.sudo()"/>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"/>
        </t>

        <t t-if="company.external_report_layout == 'background'">
            <t t-call="cfo_snr_jnr.external_layout_background_custom"><t t-raw="0"/></t>
        </t>

    </template>

    <template id="time_table_report">
            <t t-call="cfo_snr_jnr.external_layout_custom">
                <center><h2>Class Timetable</h2></center>
                <div class="page" id="time_table">
                        <t t-foreach="docids" t-as="time">
                            <t t-if="time.time_table_line_ids">
                            <div style="margin-top:5px;">
                                <div class="form-group">
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-bordered time_table_main">
                                    <caption
                                            style="color:black;border: 1px solid gainsboro;padding: 5px;background:#d9edf7;">
                                        <b>
                                            <span t-esc="time.semester_id.name"/>
                                            -
                                            <span t-esc="time.qualification_id.name"/>
                                            -
                                            <span t-esc="time.name"/>
                                            -
                                            <span t-esc="time.course_option_id.name"/>
                                        </b>
                                    </caption>
                                    <tr>
                                        <th style="width: 80px;">Subject</th>
                                        <th style="width: 80px;">Lecturer</th>
                                        <th style="width: 80px;">Campus</th>
                                        <th style="width: 87px;">Time</th>
                                        <th>Sessions</th>
                                    </tr>
                                    <t t-foreach="time.time_table_line_ids" t-as="line">
                                        <t t-if="line.course_code_id.id in data.get('course_code')">
                                            <tr>
                                                <td>
                                                    <div t-esc="line.course_code_id.name"/>
                                                    <div style="width:100px;white-space: pre-wrap;" t-esc="line.course_code_id.description"/>
                                                </td>
                                                <td width="15%">
                                                    <t t-if="line.course_code_id.lecturer_ids">
                                                        <t t-foreach="line.course_code_id.lecturer_ids" t-as="lecturer">
                                                            <span t-esc="lecturer.name"/><br/>
                                                        </t>
                                                    </t>
                                                </td>
                                                <td width="10%">
                                                    <div style="width:70px;white-space: pre-wrap;" t-esc="line.course_code_id.campus_id.name"/>
                                                </td>
                                                <td width="12%">
                                                    <div t-esc="line.day_selection.title()"/>
                                                    <span t-esc="line.start_time" t-options="{'widget':'float_time'}"/>
                                                    -
                                                    <span t-esc="line.end_time" t-options="{'widget':'float_time'}"/>
                                                </td>
                                                <td width="60%">
                                                    <div style="position:relative;white-space: initial;" id="cfo-cnr-jnr-color-picker">
                                                        <t t-foreach="line.time_table_week_ids" t-as="week">
                                                            <t t-set="val" t-value="week.color"/>
                                                            <t t-if="week.date or week.name">
                                                                <div class="time_table_div1" t-attf-style="background-color: #{val};max-width:auto;margin-left: 5px;min-height: 53px;max-height: 53px;margin-bottom: 5px;text-align: center;border: 2px solid gainsboro;border-radius: 7px;padding: 3px;float:left;">
                                                                    <span t-esc="week.date"/><br></br>
                                                                    <span t-esc="week.name"/>
                                                                </div>
                                                            </t>
                                                        </t>
                                                    </div>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </table>
                            </div>
                        </t>
                            </t>
                </div>
                <div id="footer">
                    <center></center>
                </div>
        </t>
    </template>

    <template id="report_timetable">
        <t t-call="web.html_container">
<!--            <t t-foreach="docs" t-as="doc">-->
                <t t-call="cfo_snr_jnr.time_table_report" />
<!--            </t>-->
        </t>
    </template>

     <record model="ir.ui.view" id="company_disclaimer">
        <field name="name">res.company.view.form</field>
        <field name="model">res.company</field>
        <field name="inherit_id" ref="base.view_company_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/notebook/page/group/group//field[@name='report_header']" position="after">
                <field name="disclaimer_text"/>
                <field name="session_text" placeholder="Sessions Not Available??? Write Something here to display there..."/>
            </xpath>
        </field>
    </record>


</data>
</odoo>